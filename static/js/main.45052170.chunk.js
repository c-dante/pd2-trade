(this["webpackJsonppd2-trade"]=this["webpackJsonppd2-trade"]||[]).push([[0],{19:function(e,t,s){},20:function(e,t,s){},24:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),i=s(11),a=s.n(i),r=(s(19),s(5)),l=s(3),o=s(14),d=s(8),j=(s(20),s(13)),u=s(26),h=s(4),b=s.n(h),p=s(0),O=function(e){var t,s=e.stat,n=b()("d2-item-stat",{corrupted:!!s.corrupted}),c=s.range?Object(p.jsxs)("span",{className:"d2-item-range",children:["[",s.range.min," - ",s.range.max,"]"]}):null;if(void 0!==s.level)return Object(p.jsxs)("span",{className:n,children:[s["chance%"],"% to ",s.skill," ",s.name,c]});var i=void 0!==s.min?Object(p.jsxs)("span",{className:"d2-item-value",children:[s.min," - ",s.max]}):s.value?Object(p.jsx)("span",{className:"d2-item-value",children:s.value}):null;return Object(p.jsxs)("span",{className:n,children:[i," ",s.name," ",null!==(t=s.skill)&&void 0!==t?t:null,c]})},g=function(e,t){var s;return!1===t.hideQuality[e.quality]||(!1===t.hideSockets["".concat(null!==(s=e.sockets)&&void 0!==s?s:0)]||(!(!e.set||!1!==t.hideSets[e.set])||!(!e.type||!1!==t.hideType[e.type])))},m=function(e){var t,s,n,c=e.item,i=e.settings;return Object(p.jsxs)("div",{className:b()("d2-item",{hidden:g(c,i)}),children:[Object(p.jsxs)("span",{className:b()("d2-item-name clickable",{"d2-item-eth":null!==(t=c.isEthereal)&&void 0!==t&&t}),onClick:function(){return console.log(c)},children:[null!==(s=c.name)&&void 0!==s?s:c.type,void 0!==c.sockets?" (".concat(c.sockets,")"):"",c.isEthereal?" [eth]":""]}),Object(p.jsxs)("span",{className:b()("d2-item-props",{hidden:i.hideProps}),children:[Object(p.jsx)("span",{className:"d2-item-stat d2-item-type subtle",children:c.type}),c.defense&&Object(p.jsxs)("span",{className:"d2-item-stat",children:["Defense: ",Object(p.jsx)("span",{className:"d2-item-value",children:c.defense})]}),(null!==(n=c.stats)&&void 0!==n?n:[]).map((function(e,t){return Object(p.jsx)(O,{stat:e},t)}))]})]})},x=function(){return{types:new Map,qualities:new Map,sets:new Map,sockets:new Map,count:0}},f=function(e,t){var s;e.set(t,(null!==(s=e.get(t))&&void 0!==s?s:0)+1)},v=function(e){var t,s=e.stash,c=e.settings,i=Object(n.useState)(!1),a=Object(d.a)(i,2),r=a[0],l=a[1];return Object(p.jsxs)("div",{className:"stash",children:[Object(p.jsxs)("h3",{className:"stash-owner clickable",onClick:function(){return l(!r)},children:[s.file.name,Object(p.jsx)("span",{style:{float:"right"},children:r?"Show":"Hide"})]}),s.error&&Object(p.jsxs)("span",{className:"stash-error",children:["Oh no! ",String(s.error)]}),Object(p.jsx)("span",{className:b()("stash-items",{hidden:r}),children:(null!==(t=s.value)&&void 0!==t?t:[]).map((function(e,t){return Object(p.jsx)(m,{item:e,settings:c},t)}))})]})},y=function(e){return e.toLowerCase().replace(/\W+/," ").replace(" ","-")},k=function(e){var t=e.prefix,s=e.map,n=e.toggles,c=e.onToggle;return Object(p.jsx)(p.Fragment,{children:Object(o.a)(s.entries()).map((function(e,s){var i,a=Object(d.a)(e,2),r=a[0],l=a[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("label",{htmlFor:"".concat(t,"-").concat(y(r)),children:[Object(p.jsx)("input",{type:"checkbox",id:"".concat(t,"-").concat(y(r)),checked:null===(i=n[r])||void 0===i||i,onChange:function(){var e;return c(r,!(null===(e=n[r])||void 0===e||e))}}),r," ",Object(p.jsxs)("span",{className:"subtle",children:["(",l,")"]})]})},s)}))})},S=function(e){var t=e.settings,s=e.setSettings,n=e.stats;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h3",{children:"Filter Menu"}),Object(p.jsxs)("div",{children:[n.count," items"]}),Object(p.jsx)("div",{children:Object(p.jsxs)("label",{htmlFor:"setting-hide-props",children:[Object(p.jsx)("input",{type:"checkbox",id:"setting-hide-props",checked:t.hideProps,onChange:function(){return s(Object(l.a)(Object(l.a)({},t),{},{hideProps:!t.hideProps}))}}),"Hide Props"]})}),Object(p.jsx)("h4",{children:"Qualities"}),Object(p.jsx)(k,{prefix:"setting-toggle-quality",map:n.qualities,toggles:t.hideQuality,onToggle:function(e,n){return s(Object(l.a)(Object(l.a)({},t),{},{hideQuality:Object(l.a)(Object(l.a)({},t.hideQuality),{},Object(r.a)({},e,n))}))}}),Object(p.jsx)("h4",{children:"Sockets"}),Object(p.jsx)(k,{prefix:"setting-toggle-sockets",map:n.sockets,toggles:t.hideSockets,onToggle:function(e,n){return s(Object(l.a)(Object(l.a)({},t),{},{hideSockets:Object(l.a)(Object(l.a)({},t.hideSockets),{},Object(r.a)({},e,n))}))}}),Object(p.jsx)("h4",{children:"Sets"}),Object(p.jsx)(k,{prefix:"setting-toggle-sets",map:n.sets,toggles:t.hideSets,onToggle:function(e,n){return s(Object(l.a)(Object(l.a)({},t),{},{hideSets:Object(l.a)(Object(l.a)({},t.hideSets),{},Object(r.a)({},e,n))}))}}),Object(p.jsx)("h4",{children:"Types"}),Object(p.jsx)(k,{prefix:"setting-toggle-type",map:n.types,toggles:t.hideType,onToggle:function(e,n){return s(Object(l.a)(Object(l.a)({},t),{},{hideType:Object(l.a)(Object(l.a)({},t.hideType),{},Object(r.a)({},e,n))}))}})]})};var N=function(){var e=Object(n.useState)({hideProps:!1,hideType:{},hideQuality:{},hideSets:{},hideSockets:{}}),t=Object(d.a)(e,2),s=t[0],c=t[1],i=Object(j.a)({accept:"text/plain, application/json",noClick:!0,noKeyboard:!0}),a=i.acceptedFiles,r=i.getRootProps,o=i.getInputProps,h=i.isDragActive,O=i.open,g=Object(u.a)((function(){var e=a.map((function(e){return new Promise((function(t){var s=new FileReader;s.onload=function(s){if(s.target)try{t({file:e,value:JSON.parse(String(s.target.result))})}catch(y){t({file:e,error:y})}},s.onerror=function(){t({file:e,error:s.error}),s.abort()},s.readAsText(e)}))}));return Promise.all(e)}),[a]),m=g.loading,y=g.error,k=g.value,N=Object(n.useMemo)((function(){return k?k.flatMap((function(e){var t;return null!==(t=e.value)&&void 0!==t?t:[]})).reduce((function(e,t){return function(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x();return f(s.types,e.type),f(s.qualities,e.quality),e.set&&f(s.sets,e.set),f(s.sockets,"".concat(null!==(t=e.sockets)&&void 0!==t?t:0)),s.count++,s}(t,e)}),x()):x()}),[k]);return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",Object(l.a)(Object(l.a)({},r()),{},{className:"drop-zone",children:[Object(p.jsx)("input",Object(l.a)({},o())),Object(p.jsx)("p",{children:h?"drop files":"drop stash folder / export files"}),Object(p.jsx)("button",{type:"button",onClick:O,children:"Open Stash Files"})]})),Object(p.jsxs)("div",{className:b()("results-window",{hidden:!k||k.length<=0}),children:[Object(p.jsxs)("div",{className:"stash-results",children:[m?"Loading...":"",y&&JSON.stringify(y),k&&k.map((function(e,t){return Object(p.jsx)(v,{stash:e,settings:s},t)}))]}),Object(p.jsx)("div",{className:"filter-menu",children:Object(p.jsx)(S,{stats:N,settings:s,setSettings:c})})]})]})},T=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,27)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),i(e),a(e)}))};a.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(N,{})}),document.getElementById("root")),T()}},[[24,1,2]]]);
//# sourceMappingURL=main.45052170.chunk.js.map